---
layout: article
title:  "redis-pipeline-mulit-lua脚本执行比较"
tags: redis
categories: 奇难杂症
date: 2017-05-04 11:32:00
---
<div id='preview-contents' class='note-content'>
                        
                    



<h3 id="redis-pipeline-mulit-lua脚本执行比较">redis pipeline mulit Lua脚本执行比较</h3>

<p>reids 的<code>pipeline</code>、<code>mulit</code>、<code>lua</code>脚本都可以批量执行命令，但也有异同。先使用pipeline批量执行命令，同时抓包。</p>

<pre class="prettyprint hljs-dark"><code class="language-bash hljs">tcpdump -i ens33 port 6379 -w redis.cap<br></code></pre>

<p>phpredis pipeline：</p>



<pre class="prettyprint hljs-dark"><code class="language-php hljs">$redis = <span class="hljs-keyword">new</span> Redis();<br><br>$redis-&gt;connect(<span class="hljs-string">'192.168.237.130'</span>);<br><br>$redis -&gt;select(<span class="hljs-number">0</span>);<br><br><span class="hljs-comment">//pipline</span><br><br>$redis -&gt;multi( Redis::PIPELINE );<br><br><span class="hljs-keyword">for</span>( $i=<span class="hljs-number">0</span>;$i&lt;<span class="hljs-number">10</span>;$i++ ){<br>$redis -&gt;set( <span class="hljs-string">'tmp_key_'</span>.$i ,$i );<br>}<br><br>$redis -&gt;exec();<br></code></pre>

<p>通过wireshark查看抓包后的结果：</p>

<p><img longdesc="./0Y-]141YD_E`KOZ0E45JM.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,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" class=""></p>

<p><img longdesc="./79M15PG5Z-O`M@_GX_IASJ.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,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" class=""> <br>
可以看出，redis 客户端是一次性将10条命令发送给server，server处理完10条命令后，一次性将执行结果返回给客户端。接下来通过mulit执行10条命令：</p>



<pre class="prettyprint hljs-dark"><code class="language-php hljs">$redis = <span class="hljs-keyword">new</span> Redis();<br><br>$redis-&gt;connect(<span class="hljs-string">'192.168.237.130'</span>);<br><br>$redis -&gt;select(<span class="hljs-number">0</span>);<br><br><span class="hljs-comment">//pipline</span><br><br>$redis -&gt;multi();<br><br><span class="hljs-keyword">for</span>( $i=<span class="hljs-number">0</span>;$i&lt;<span class="hljs-number">10</span>;$i++ ){<br>$redis -&gt;set( <span class="hljs-string">'tmp_key_'</span>.$i ,$i );<br>}<br><br>$redis -&gt;exec();<br></code></pre>

<p>抓包后结果：</p>

<p><img longdesc="./L3YUCNZ0I[EA3D[V1JIHS.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,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" class=""></p>

<p><img longdesc="./0@5SQ0M8VYTKWUHC7HCPPU.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIkAAAAaCAIAAAAMtOhzAAACr0lEQVRoBe1ZO3KDMBAVmRzFpMj4BOQEULnKEXBpmnQu06XBpTlCKldwAvsETArjuxDJ8grxEUjmIzwWRRxJq/09abVaodx8fT0Q+wj5MeWShQ5ywuza4PtzfkBS4Asy35AeyP5OaPm2qLNcvC3R6S+rD4h7DDZi36iMRJ51/Q6rPN+79ZmX3XeE/FXDSJ0WeibFJllTA+DvOgE1Hv4XYtrqgI3j7ALM7GAZN4LWYvmk2Lj7cqRtWmAtuj7CkLvHp0x0YIsOMGveTe0WVbChK5vD/TZ7qH6RMqr8h+KjKldEX+hzOadFQ/hfNx88tYKNkJkZaPcAxC7LDlCYDRMQLBxl2qWaUV0eMPtGl+e75Rpsun2ki0Iam8vuA1Jf62N30aXvM8l9VTEWJ4TDnHIqQp+XVnrfaHERTTWv+1VirxJqLv3HTdriuJRY3UPPYkdJ1DjOmQ82zJVgKO7w0lvZMI+XgS0BD8yt/RZ3wDw/bhrqXZUZInrWH/s4beZWQmX+EM35YFOxhhagtuBGct8+BT/svl2hnr7p7nFlOfoe8+SdLTakoFuqDdrvDkrPM0pC7qgsqy0h7diw/M+LEFyu+wQvgfnA2pJMMlXpBWJ7dWvHZrE50gIorhFCMCcHAtkmXM0QIeHLiJT9wFrutCneylroSeXMebelxN9FVMGGpjTyR5yIXrW/rvtis8UFXRbPk7UXOeFX6/uHu+JLwMkh6vCcKn1JyWRtBycfzsP+9paY00YFmwYKbV34RSH7/LVp1koyts78ipzP6e2Ry/JQzE0oYhTmBzFTlR67gvG5ppAj3/bKLyriFnnvLgKDmG6cESIdsYf4cWTMjqvSvoFFA+tuui1FTqUsRP3uONOpO4wk80YwjB/H4KK0b8ZQwPAUesBgI3SN9gGDjXYIhAr8AwciZXK2RLUqAAAAAElFTkSuQmCC" class=""></p>

<p><img longdesc="./P[{GZ4GR5EWF[[G0PJ-2IA.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAAA1CAIAAABa0Td+AAAGNElEQVR4Ae1bP3biPBAXeXsUnCIvJzAnCF+TKm06U4Zmuy3p0kAJ3bap0sScAJ8gL8XCXfLNSJYsyWMjLBsTZDVYI2n+/SR5pDHsuyhpwqAkaUERT1V0u5+sV/Vviy7l2L9t8W+FDzIpu5KrXMXftqfT+gi4I9xDCcwDN4HZO5ibe2AAPtCpEDzwh9Vktg0Q/EsBfjsbTVYHAwAgqdINNgD6KJpnmynKUSK6l2uY2VelPnTcL2PG4uVe9cKIlNdrolbV2ekhTZAfCMIYWFTscUqo3eBVFxbkgklOnnJxuFaEGy2i4VxSiY6IvzTNiMfxy27PJlE0u/1ePzBYIdPP5X73MmZsT/RuQjpEj0+LaML2u/V+NlrcpX/LXKK7mH2Wyf6U+C6qY+IjN/fVN/rKLjDFwZs9F4cJxZd9kuJPcTIV68VhtEMXznm5jPWtRRtmCtYaPB+5XXHMtxqKlZdcHEzZ06bfKKVdacytI9+gDDvaM0D5F1gaImDjF6vCpLpp7NhLiLAEtCNXcjGNQmqxfBy17KCbG/B8bZRf9ucyAJ1lYdOaK8C0JKng35JcMQNyA0RFbvNdWXXcPS5R/XYWze9TiL/YPFKxr1T9HL8Pv5dx9tVWVFHW+HGdJtnbh3mogG4tyX1YY+yqCSgWDA+XygqdgaIDL84xNrTbGQZ0EIyMX/4u483Ubi8rSfNhrIpe5mBRtq/z7EgchiOq+NP0w6EA+vDvk93flsIwSy7Np0LudqY7av+VUQIsO89Z1YEvy8WD7pSlcl5CjJ8mcOqVJokDcH7YlsQyl2YUlJ2X6SZROjRjRo36eEb2/ByPO5qMs1uTq3sHnKgF8npL6fqCUrUDWvBJGsD59XYnUe/AwxfKMnjgLxSXztWq3+o7Fz8I6MsD3sDDVtn2270vX3C5GMFdlUEV3vQCHuOgcpJDhrkYOtmJlwotQiPz80G/0+umOTzieI8XIPxjLRkfwWzAGBaL58n/ChcfLhUo7yy/k+xvxt8gQPK4drIaxOH68PGWJY8iBTF++ZOwzXuDdDdfEtMNY+rkc2R9wIDJasUTubOtcK/YbcTs4fxOn+N8WLFr5bAhH6EOEopm7j6CpLkVDsTo8PWjRuvpEfVoWPhFrp3kwCvJ4mYKuzS+ljRZ1SvJb0JBrtAJ8rxA4IJ5g9QIK0fUwS5Cf8khF8w555YVZhXdRTe7XqG1Y7eK0W2Q3e7qqyWhBaYzkSKdK1qLeVDNh2o5xTvQlwtFSLg8STCZFIhRApEm+is2qps5smg36EZFDSUeTK2IDp2TvII7gByvs5Pkfh6pHe9hzV/tuB+O3u9wxdcnvXva6erEbqbRnC1/GylzvHTN5hE3i9/3sc9/eOeLr7Ns/spfZ/w194fKwNdJ66fNF3iutZXkyF9kMGnXtxd2R+12Zw5bRqrPZTQSP8qQG5lYjjIywrm/WcB3Y3C1b0+XfkB1kaoDLyKgchRF012SHDO8ZZfh/olJFOFrsaxcLKnpI+PLw2qxYTLyrOkPTZBRM7Ef//cUZ/Nn67tAzkQs+ufJYpP8kOUOauvA17ui1OqQ5DBSEyUGxwjCofnuql4lx0YR7Ql751s0buCYZ3Qr8p2VS8av0DAxnW/2xh0Fz99mDstdngu0A4uPYW6G0L18owiIZ5oGb76incaTYRQSqdLYEktK6/ydTD2p09UnaeA9ZeZEKcA9abCOo7cn8RGqJ6uzDffY6s+m4wULEuEPpvNlqHfByhqqOa94mNVB5q0Nb11RxWnFY0hCJWNEnF4+BpzsH75wWuBzsuBwBzgATyVj8ujUO9nQFp9wAWxquQPwwLp0+dZWsqEtPk3ND3ecA/BwSIXj6/NbuE66RssdgIfr6B1cY2Xwr9K+Lhuu0fM923TkT5NKO7ybYl94gQ1/b/wZaQil+/BAeMBlxathVjJG0YeHn+cBHfjGyRjLbJqP/BTP/dRWxccSp6qn9lcDQ3zQga+wn0rG5MewkW+yoS0+FaoP5EoPDDd3la657gZn4K/bDeFZ57DVh+eUECwegA8BZcLGAXjCKSGQBuBDQJmwcQCecEoIpAH4EFAmbByAJ5wSAmkAPgSUCRsH4AmnhEAagA8BZcLGAXjCKSGQ/geY1f4qEc4n9QAAAABJRU5ErkJggg==" class=""></p>

<p><img longdesc="./2IN[WCFPEW-D-NEE$GPN.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAAAaCAIAAAD9v7P+AAACZUlEQVRoBe1ZPXaDMAw2fT0KdMjLCcgJYMrUI8AYlm4Zs3VJRjhCp0xwgnACXoaQu1Abxw6YmKDi8PNqliBFluRPliwboygKpJ/REEh8w0VxETqlByX1Ppoz2rCIwPWwi5AXv4n8sWm8UGqPn4zt0cvtRy6dsRUsSb4YunC9HPI2A/XCVUq2ZAldr81V+mq+bAZQu6r0QO1C5UU/W0Iiimp6GAR04RoGZ4AVnSUAsIYR1SEZBmeAFaUhuR5WvIFdHa4AN7ToHQHlR0WPH0XvRvQbBAGlWQIxrEyW9pxldnbITCJd6esxSamKlpqqv8jzSlEz1XnC8woJR5DNDzPcbJ/j8y5+4mVgdYgKG9v4xQnOn9PGbPwvMmTynB97+GBeWQCigsf0vEIizIFeCm0Zek4Ye2nwPZ0bGCfM93a0A+6qsw5Jfk6Rt6aXqGW0rIWNssuE+grzY4nScy4spXZyFiHhnZwbIXZH16dCSSBhqg2jm3KovMSsyJ5FSMzNiRb52MOX1/SVFHuSFNGxUqhI2iw/nu8CIgqUZqqLostOgrgrLfLXS4bshfXYnoTbEhLahDR3JxlfYgHJ5KH8pn5zs/XQvVYnvhvZ+69KIWsOcdZ4BI9icoyeAAaVr1lMfCtIPbbXdZ1vS0hq2idKOGGRf/5YtO0kvdfT9U223Oz2gYJ80KsMuBcirI/VLqg8BorrKZvB2wdDAIC87VPwgvuLSjYrUAhSQawjZLOWGDR2SsLKs4QtEbbKAKujpyjZcfI96nc26emDiuH6cl4Fikp1KM8Spd79S2U6JJMLuw6JDsnkEJicQ78w5a3/UKVBTgAAAABJRU5ErkJggg==" class=""></p>

<p><img longdesc="./38`XR`TCL_7U}ZNVLMJEJ.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,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" class=""> <br>
可以看出mulit是每次先将命令发送给服务端，服务端将其塞到队列，并告知客户端ueued。而后在收到exec命令后依次执行命令。一次返回结果。 <br>
lua脚本：</p>



<pre class="prettyprint hljs-dark"><code class="language-lua hljs"><span class="hljs-keyword">for</span> i=<span class="hljs-number">0</span>,<span class="hljs-number">9</span> <span class="hljs-keyword">do</span><br>  redis.call(<span class="hljs-string">'set'</span>,<span class="hljs-string">'tmp_key_'</span>..i,i)<br><span class="hljs-keyword">end</span><br></code></pre>



<pre class="prettyprint hljs-dark"><code class="language-bash hljs">tcpdump -i lo port 6379 -w redis.cap -vvv<br>root@pz-ubuntu-130:/usr/<span class="hljs-built_in">local</span>/redis<span class="hljs-comment"># ./redis-cli --eval test.lua</span><br></code></pre>



<p><img longdesc="./74J9[X63T{WLMO8S8D]4}D.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,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" class=""></p>

<p>可以看到，redis的服务端直接收到的的是lua脚本。</p>

<p>综上，总结</p>

<ul><li><code>lua</code>脚本和<code>pipeline</code>只需发送一次命令请求，大大减少了网络请求</li>
<li><code>mulit</code>，多个命令发送多次，只是服务端并不每次都执行。鉴于redis的消耗都是在网络传输，执行命令本身所需时间只需微妙级别，顾mulit性能大大低于pipeline和lua脚本</li>
<li><code>lua</code>脚本和<code>pipeline</code>都具有操作原子性。即在执行命令的过程中会阻塞其他客户端的执行</li>
<li><code>multi</code> 可以做到操作事务性，即如果因为操作失败，命令都不会执行。也可配合wath，监控变量，来决定操作是否继续执行</li>
</ul></div></body></html>