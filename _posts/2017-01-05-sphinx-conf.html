---
layout: article
title:  "coreseek搜索中文的配置"
tags: 搜索 sphinx
categories: 拓展
date: 2017-01-05 15:04:00
---
<div id='preview-contents' class='note-content'>
                        
                    



<h3 id="coreseek搜索中文的配置">coreseek搜索中文的配置</h3>

<p>关于中文搜索，如果大家想用<code>sphinx</code>来实现，还是算了，因为sphinx本身并不支持中文搜索，虽然<code>coreseek</code>公司有针对sphinx提供补丁文件，但目前为止最新的版本知针对0.9.8，不过，建议不要这样作，之前我也尝试打补丁，但事实证明不可行，因为<code>sphinx</code>低级的版本不支持关于中文配置的选项。coreseek其实是sphinx的升级版，说白了，就是<code>sphinx</code> 加上<code>mmseg</code>，<code>mmseg</code>就是中文分词的工具，<code>coreseek</code>就是使得<code>sphinx</code>也能对中文进行索引。接下来我们就来配置<code>coreseek</code>，<a href="http://www.coreseek.cn/uploads/csft/3.2/coreseek-3.2.14.tar.gz" target="_blank">coreseek3.2.14 下载地址</a></p>

<pre class="prettyprint hljs-dark"><code class="language-ini hljs"><span class="hljs-comment">#</span><br><span class="hljs-comment"># Sphinx configuration file sample</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># WARNING! While this sample file mentions all available options,</span><br><span class="hljs-comment"># it contains (very) short helper descriptions only. Please refer to</span><br><span class="hljs-comment"># doc/sphinx.html for details.</span><br><span class="hljs-comment">#</span><br><br><span class="hljs-comment">#############################################################################</span><br><span class="hljs-comment">## data source definition</span><br><span class="hljs-comment">#############################################################################</span><br><br>source shop<br>{<br>    type                    =mysql<br>    sql_host                =127.0.0.1<br>    sql_user                =echiele<br>    sql_pass                =123456<br>    sql_db                  =echiele<br>    sql_port                =3310   <span class="hljs-comment"># optional, default is 3306</span><br>    <span class="hljs-comment">#sql_sock               =/usr/local/mysql/mysqld.sock</span><br>    mysql_connect_flags = 32 <span class="hljs-comment"># enable compression</span><br>    sql_query_pre           = SET NAMES utf8<br>    sql_query_pre           =replace into sph_shop_counter select 1,max(updatime) from shop<br>    <span class="hljs-comment">#sql_query_pre          = replace into sph_shop_counter select 1,max(shop_id) from shop</span><br>    <span class="hljs-comment">#sql_query_pre          = SET SESSION query_cache_type=OFF</span><br>    sql_query               = \<br>        select s.shop_id,s.shop_id,s.shop_name,shop_branch,s.summary,CONCAT_WS('',s.zonefullname,address) address,\<br>        SUBSTR(s.zonecode,1,4) city_id,rpad(substr(s.zonecode,1,6),6,0) area_id ,rpad(substr(s.zonecode,1,8),8,0) zone_id,\<br>        s.tags,atmosphere,feature,mobile,telphone,radians(longitude) longitude,radians(latitude) latitude,\<br>        if(vip_level&amp;&amp;ratio&amp;&amp;preordain,1,0) vip_level,recommend,if(comment_cnt=0,@p:=capita_price,@p:=(capita_price/comment_cnt) ) capita_price,\<br>        case  when @p&lt;=30 then '1' when @p&gt;=31 and @p&lt;=50 then '2' when @p&gt;=51 and @p&lt;=80 then '3' when @p&gt;=81 and @p&lt;=100 then '4' when @p&gt;=101 and @p&lt;=150 then '5' when @p&gt;=150 then '6' end 'p',\<br>        verify,promo,preordain,s.promo&amp;4 groupbuy ,s.promo&amp;1 combo,if(promo&amp;8&gt;0,1,0) privilege,order_cnt,if(s.product_cnt&gt;0,1,0) product_cnt,view_cnt,rate,\<br>        if(comment_cnt=0,0,appraise/comment_cnt) appraise,complete,s.creatime,s.updatime,if(service_scope&amp;1&gt;0,1,0) waimai,\<br>        GROUP_CONCAT(concat_ws(',' ,(SELECT cate_name from category where cate_code =substr(sc.cate_code,1,2) ) ,(SELECT cate_name from category where cate_code =substr(sc.cate_code,1,4) ))) cate_name,\<br>        rand() as rand_sort,\<br>        (SELECT GROUP_CONCAT(p.pname) from product p where p.shop_id=s.shop_id) pname \<br>        from shop s INNER JOIN shop_detail sd on sd.shop_id=s.shop_id left join shop_category sc on sc.shop_id=s.shop_id \<br>        where s.shop_id&gt;=$start  and s.shop_id&lt;=$end group by s.shop_id order by s.shop_id    <br><br><span class="hljs-comment">#   select s.shop_id,s.shop_id,shop_name,shop_branch,summary,CONCAT_WS('',s.zonefullname,address) address ,SUBSTR(s.zonecode,1,4) city_id,rpad(substr(s.zonecode,1,6),6,0) area_id ,rpad(substr(s.zonecode,1,8),8,0) zone_id,tags,atmosphere,feature,mobile,telphone,radians(longitude) longitude,radians(latitude) latitude,vip_level,capita_price,verify,promo,preordain,if(promo &amp;4&gt;0,1,0) groupbuy ,if(promo&amp;8&gt;0,1,0) privilege,order_cnt,view_cnt,rate,if(comment_cnt=0,0,appraise/comment_cnt)appraise,complete,creatime,updatime, GROUP_CONCAT(concat_ws(',' ,(SELECT cate_name from category where cate_code =substr(sc.cate_code,1,2) ) ,(SELECT cate_name from category where cate_code =substr(sc.cate_code,1,4) ))) cate_name ,rand() as rand_sort from shop s INNER JOIN shop_detail sd on sd.shop_id=s.shop_id  inner join shop_category sc on sc.shop_id=s.shop_id where s.shop_id&gt;=$start  and s.shop_id&lt;=$end  group by shop_id</span><br>    sql_query_range     = SELECT MIN(shop_id),max(shop_id)  FROM shop<br>    sql_attr_uint       =   shop_id<br>    sql_attr_uint       =   city_id<br>    sql_attr_uint       =   area_id<br>    sql_attr_uint       =   zone_id<br>    sql_attr_uint       =   vip_level<br>    sql_attr_float      =   capita_price<br>    sql_attr_float      =   recommend<br>    <span class="hljs-comment">#商家消费均价范围</span><br>    sql_attr_uint       =   p<br>    <span class="hljs-comment">#随机字段，sphinx的随机排序只能在排序字段只有random的时候才有效，否则报错</span><br>    sql_attr_float      =   rand_sort<br>    sql_attr_uint       =   verify<br>    sql_attr_uint       =   preordain<br>    sql_attr_uint       =   promo<br>    <span class="hljs-comment">#商铺是否提供外卖</span><br>    sql_attr_uint       =   waimai<br>    sql_attr_uint       =   complete<br>    <span class="hljs-comment">#商户是否有团购</span><br>    sql_attr_uint       =   groupbuy<br>    <span class="hljs-comment">#商户是否有套餐</span><br>    sql_attr_uint       =   combo<br>    sql_attr_uint       =   privilege<br>    sql_attr_uint       =   order_cnt<br>    sql_attr_uint       =   product_cnt<br>    sql_attr_uint       =   view_cnt<br>    sql_attr_uint       =   rate<br>    sql_attr_float      =   appraise<br>    sql_attr_float      =   longitude<br>    sql_attr_float      =   latitude<br>    sql_attr_timestamp  =   updatime<br>    sql_attr_timestamp  =   creatime<br>    sql_attr_multi          =       uint parent_id from query<span class="hljs-comment">; SELECT shop_id,substr(cate_code,1,2) FROM shop_category</span><br>    sql_attr_multi      =   uint category_id from query<span class="hljs-comment">; SELECT shop_id,cate_code  FROM shop_category</span><br>    sql_query_info      = SELECT shop_id FROM shop  WHERE shop_id=$id<br><br>}<br><br>source shop_delta:shop{<br>    sql_query_pre   =set names utf8<br>         sql_query                               = \<br>                select s.shop_id,s.shop_id,s.shop_name,shop_branch,s.summary,CONCAT_WS('',s.zonefullname,address) address,\<br>                SUBSTR(s.zonecode,1,4) city_id,rpad(substr(s.zonecode,1,6),6,0) area_id ,rpad(substr(s.zonecode,1,8),8,0) zone_id,\<br>                s.tags,atmosphere,feature,mobile,telphone,radians(longitude) longitude,radians(latitude) latitude,\<br>                if(vip_level&amp;&amp;ratio&amp;&amp;preordain,1,0) vip_level,recommend,if(comment_cnt=0,@p:=capita_price,@p:=(capita_price/comment_cnt) ) capita_price,\<br>                case  when @p&lt;=30 then '1' when @p&gt;=31 and @p&lt;=50 then '2' when @p&gt;=51 and @p&lt;=80 then '3' when @p&gt;=81 and @p&lt;=100 then '4' when @p&gt;=101 and @p&lt;=150 then '5' when @p&gt;=150 then '6' end 'p',\<br>                verify,promo,preordain,s.promo&amp;4 groupbuy ,s.promo&amp;1 combo,if(promo&amp;8&gt;0,1,0) privilege,order_cnt,if(product_cnt&gt;0,1,0) product_cnt,view_cnt,rate,\<br>                if(comment_cnt=0,0,appraise/comment_cnt) appraise,complete,s.creatime,s.updatime,if(service_scope&amp;1&gt;0,1,0) waimai,\<br>                GROUP_CONCAT(concat_ws(',' ,(SELECT cate_name from category where cate_code =substr(sc.cate_code,1,2) ) ,(SELECT cate_name from category where cate_code =substr(sc.cate_code,1,4) ))) cate_name,\<br>                rand() as rand_sort,\<br>                (SELECT GROUP_CONCAT(p.pname) from product p where p.shop_id=s.shop_id) pname \<br>                from shop s INNER JOIN shop_detail sd on sd.shop_id=s.shop_id left join shop_category sc on sc.shop_id=s.shop_id \<br>                where s.updatime&gt;=$start  and s.updatime&lt;=$end group by s.shop_id order by s.shop_id<br><br>    sql_query_range         =select (select max_doc_id from sph_shop_counter where id=1),max(updatime)from shop<br>        sql_range_step          =700000<br><br>    <span class="hljs-comment">#sql_query_range    =select (select max_doc_id from sph_shop_counter where id=1),max(shop_id) from shop</span><br>}<br><br>source product{<br>        type                                    =mysql<br>        sql_host                =127.0.0.1<br>        sql_user                =echiele<br>        sql_pass                =123456<br>        sql_db                                  =echiele<br>        sql_port                                =3310   <span class="hljs-comment"># optional, default is 3306</span><br>        <span class="hljs-comment">#sql_sock                                =/usr/local/mysql/mysqld.sock</span><br>        mysql_connect_flags     = 32 <span class="hljs-comment"># enable compression</span><br>        sql_query_pre                   = SET NAMES utf8<br>    sql_query_pre           = replace into sph_product_counter select 1,max(id) from product_contrast<br>    sql_query   =   \<br>    select pc.id,p.pname,p.alias_name,p.shop_name,CONCAT_WS('',s.zonefullname,s.address) address,concat_ws(',',(SELECT cate_name from category where cate_code=substr(p.cate_code,1,2)),(SELECT cate_name from category where cate_code=substr(p.cate_code,1,4)) ) cate_name ,radians(s.longitude) longitude,radians(s.latitude) latitude,substr(p.cate_code,1,2) parent_id,substr(p.cate_code,1,4) category_id,substr(s.zonecode,1,4) city_id,rpad(substr(s.zonecode,1,6),6,0) area_id,rpad(substr(s.zonecode,1,8),8,0) zone_id,s.recommend vip_level,pc.price,pc.orig_price,pc.creatime,if(pc.comment_cnt=0,0,round(pc.appraise/pc.comment_cnt,1)) appraise,if(pc.price=0,1,round(pc.price/pc.orig_price,2)) rate,pc.preordain,if(pc.promo&amp;4&gt;0,1,2) groupbuy,if(pc.promo&amp;1,1,2) combo,if(pc.promo&amp;8&gt;0,1,0) privilege,pc.view_cnt,rand() rand_sort from product p inner join product_contrast pc on pc.pid=p.pid and pc.shop_id=p.shop_id and pc.state='1' inner join shop s on p.shop_id=s.shop_id  where pc.id&gt;=$start and pc.id&lt;=$end and pc.state=1<br>    sql_query_range     =   select min(id),max(id) from product_contrast<br>    sql_attr_uint       =   city_id<br>    sql_attr_uint       =   area_id<br>    sql_attr_uint       =   zone_id<br>    sql_attr_uint       =   parent_id<br>    <span class="hljs-comment">#改商家是否是收费的，没看错就是，为了兼容老版本</span><br>    sql_attr_uint       =   vip_level<br>    sql_attr_uint       =   category_id<br>    sql_attr_float      =   appraise<br>    sql_attr_uint       =   preordain<br>    sql_attr_uint       =   groupbuy<br>    sql_attr_uint       =   combo<br>    sql_attr_uint       =   privilege<br>    sql_attr_uint       =   view_cnt<br>    sql_attr_float      =   price<br>    sql_attr_float      =   orig_price<br>    sql_attr_float      =   rate<br>    sql_attr_float      =   latitude<br>    sql_attr_float      =   longitude<br>    sql_attr_float      =   rand_sort<br>    sql_attr_timestamp  =   creatime<br>    sql_query_info          = SELECT id FROM product_contrast WHERE id=$id<br>}<br><br>source product_delta:product{<br>    sql_query_pre       =set names utf8<br>    sql_query_range     =select (select max_doc_id from sph_product_counter where id=1),max(id) from product_contrast<br>}<br><span class="hljs-comment">#团购跟组合套餐商品</span><br>source coupon:product{<br>    sql_query_pre   =set names utf8 <br>    sql_query_pre   = replace into sph_coupon_counter select 1,max(id) from product_contrast<br>    sql_query   =select pc.id,p.pname,p.alias_name,p.shop_name,CONCAT_WS('',s.zonefullname,s.address) address,pc.stock,\<br>            concat_ws(',',(SELECT cate_name from category where cate_code=substr(p.cate_code,1,2)),\<br>            (SELECT cate_name from category where cate_code=substr(p.cate_code,1,4)) ) cate_name,\<br>            radians(s.longitude) longitude,radians(s.latitude) latitude,substr(p.cate_code,1,2) parent_id,substr(p.cate_code,1,4) category_id,\<br>            pt.tuan_id tuan_id,if(pt.apply_num_people1,pt.apply_num_people1,p.enough_num) apply_num_people1,if(pt.apply_num_people1,pt.apply_num_people2,p.enough_num) apply_num_people2,\<br>            substr(s.zonecode,1,4) city_id,rpad(substr(s.zonecode,1,6),6,0) area_id,rpad(substr(s.zonecode,1,8),8,0) zone_id,\<br>            s.recommend recommend,if(s.vip_level&amp;&amp;s.ratio &amp;&amp; s.preordain,1,0) vip_level,pc.price,pc.orig_price,pc.creatime,if(pc.comment_cnt=0,0,round(pc.appraise/pc.comment_cnt,1)) appraise,pc.order_cnt,\<br>            if(pc.price=0,1,round(pc.price/pc.orig_price,2)) rate,if(pc.promo&amp;4&gt;0,1,2) groupbuy,if(pc.promo&amp;1,1,2) combo,pc.view_cnt\<br>            from product p inner join product_contrast pc on pc.pid=p.pid and pc.shop_id=p.shop_id and pc.state='1' and (pc.stock&gt;0 or pc.stock='-9') inner join shop s on p.shop_id=s.shop_id and (s.vip_level&amp;&amp;s.ratio &amp;&amp; s.preordain) left join product_tuan pt on pt.product_contrast_id=pc.id where (pc.promo&amp;1 or pc.promo&amp;4) and pc.id&gt;=$start and pc.id&lt;=$end<br>    sql_query_range         =       select min(id),max(id) from product_contrast<br>        sql_attr_uint           =       city_id<br>        sql_attr_uint           =       area_id<br>        sql_attr_uint           =       zone_id<br>        sql_attr_uint           =       parent_id<br>        <span class="hljs-comment">#是否收费</span><br>        sql_attr_uint           =       recommend<br>    <span class="hljs-comment">#是否能预定</span><br>        sql_attr_uint           =       vip_level<br>        sql_attr_uint           =       stock<br>        sql_attr_uint           =       category_id<br>        sql_attr_float          =       appraise<br>        sql_attr_uint           =       groupbuy<br>        sql_attr_uint           =       combo<br>        sql_attr_uint           =       view_cnt<br>        sql_attr_uint           =       order_cnt<br>        sql_attr_uint           =       apply_num_people1<br>        sql_attr_uint           =       apply_num_people2<br>        sql_attr_uint           =       tuan_id<br>        sql_attr_float          =       price<br>        sql_attr_float          =       orig_price<br>        sql_attr_float          =       rate<br>        sql_attr_float          =       latitude<br>        sql_attr_float          =       longitude<br>        sql_attr_timestamp      =       creatime<br>        sql_query_info          = SELECT id FROM product_contrast WHERE id=$id<br><br>}<br>source coupon_delta:coupon{<br>    sql_query_range     =select (select max_doc_id from sph_coupon_counter where id=1),max(id) from product_contrast<br>}<br>source tuan:product{<br>    sql_query_pre       =set names utf8<br>    sql_query_pre       =set @virtual_id=0<span class="hljs-comment">;</span><br>    <span class="hljs-comment">#20元以下 21-50 51-99 100-199 200-399 400-799 800以上</span><br>    sql_query       =select @virtual_id:=@virtual_id+1 as virtual_id,pt.tuan_id,pt.is_need_order,pt.tuan_sales_time,pt.tuan_state,pt.apply_num_people1,apply_num_people2,p.pname,p.alias_name,p.shop_name,p.tags,CONCAT_WS('',s.zonefullname,s.address) address,concat_ws(',',(SELECT cate_name from category where cate_code=substr(p.cate_code,1,2)),(SELECT cate_name from category where cate_code=substr(p.cate_code,1,4)) ) cate_name ,radians(s.longitude) longitude,radians(s.latitude) latitude,substr(p.cate_code,1,2) parent_id,substr(p.cate_code,1,4) category_id,substr(s.zonecode,1,4) city_id,rpad(substr(s.zonecode,1,6),6,0) area_id,rpad(substr(s.zonecode,1,8),8,0) zone_id,s.vip_level,if(s.promo&amp;8,1,0) coupons,if(s.comment_cnt=0,4,round(s.appraise/s.comment_cnt,1)) shop_appraise,s.shop_id,pc.price,\<br>    case\<br>    when pc.price&lt;=20 then '1'\<br>    when pc.price&lt;=50 and pc.price&gt;=21 then '2'\<br>    when pc.price&lt;=99 and pc.price&gt;=51 then '3'\<br>    when pc.price&lt;=199 and pc.price&gt;=100 then '4'\<br>    when pc.price&lt;=399 and pc.price&gt;=200 then '5'\<br>    when pc.price&lt;=799 and pc.price&gt;=400 then '6'\<br>    else '7' end 'p_f', \<br>pc.orig_price,pc.creatime,if(pc.comment_cnt=0,0,round(pc.appraise/pc.comment_cnt,1)) appraise,if(pc.price=0,1,round(pc.price/pc.orig_price,2)) rate,pc.order_cnt,pc.view_cnt from product_tuan pt inner join product_contrast pc on pt.product_contrast_id=pc.id inner join product p on pc.pid=p.pid  inner join relationship_shop_tuan rst on rst.product_contrastID=p.pid inner join shop s on rst.shop_id=s.shop_id<br>    sql_query_range     =   <br>    sql_attr_uint       =   tuan_id<br>    sql_attr_uint       =   is_need_order<br>    sql_attr_timestamp  =   tuan_sales_time<br>    sql_attr_float      =   longitude<br>    sql_attr_float      =   latitude<br>    sql_attr_uint       =   parent_id<br>    sql_attr_uint       =   category_id<br>    sql_attr_uint       =   city_id<br>    sql_attr_uint       =   area_id<br>    sql_attr_uint       =   zone_id<br>    sql_attr_uint       =   vip_level<br>    sql_attr_uint       =   coupons<br>    <span class="hljs-comment">#商铺评分用于团购满意度数据(针对商铺的满意度)</span><br>    sql_attr_uint       =   shop_appraise<br>    sql_attr_uint       =   shop_id<br>    sql_attr_float      =   price<br>    sql_attr_float      =   orig_price<br>    sql_attr_timestamp  =   creatime<br>    sql_attr_uint       =   appraise<br>    sql_attr_float      =   rate<br>    sql_attr_uint       =   order_cnt<br>    sql_attr_uint       =   view_cnt<br>    sql_attr_uint       =   tuan_state<br>    sql_attr_uint       =   p_f<br>    sql_attr_uint       =   apply_num_people1<br>    sql_attr_uint       =   apply_num_people2<br>}<br>index shop<br>{<br>    source          = shop<br>    path            = /usr/local/coreseek/var/data/shop<br>    docinfo         = extern<br>    mlock           = 0<br>    morphology      = none<br>    min_word_len        = 1<br>    charset_type        = zh_cn.utf-8<br>    charset_dictpath    = /usr/local/mmseg3/etc/<br>    ngram_len       = 0<br>    html_strip      = 1<br><br>}<br>index shop_delta:shop{<br>        source                  =shop_delta<br>        path                    =/usr/local/coreseek/var/data/shop_delta<br>}<br>index product:shop{<br>    source  =   product<br>    path    =   /usr/local/coreseek/var/data/product<br>}<br>index product_delta:product{<br>    source  =   product_delta<br>    path    =   /usr/local/coreseek/var/data/product_delta<br>}<br>index tuan:product{<br>    source  =   tuan<br>    path    =   /usr/local/coreseek/var/data/tuan<br>}<br>index coupon:product{<br>    source  =   coupon<br>    path    =   /usr/local/coreseek/var/data/coupon<br>}<br>index coupon_delta:product{<br>    source  =   coupon_delta<br>    path    =   /usr/local/coreseek/var/data/coupon_delta<br>}<br><span class="hljs-comment">#############################################################################</span><br><span class="hljs-comment">## indexer settings</span><br><span class="hljs-comment">#############################################################################</span><br><br>indexer<br>{<br>    <span class="hljs-comment"># memory limit, in bytes, kiloytes (16384K) or megabytes (256M)</span><br>    <span class="hljs-comment"># optional, default is 32M, max is 2047M, recommended is 256M to 1024M</span><br>    mem_limit           = 1024M<br><br>    <span class="hljs-comment"># maximum IO calls per second (for I/O throttling)</span><br>    <span class="hljs-comment"># optional, default is 0 (unlimited)</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># max_iops          = 40</span><br><br><br>    <span class="hljs-comment"># maximum IO call size, bytes (for I/O throttling)</span><br>    <span class="hljs-comment"># optional, default is 0 (unlimited)</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># max_iosize        = 1048576</span><br><br><br>    <span class="hljs-comment"># maximum xmlpipe2 field length, bytes</span><br>    <span class="hljs-comment"># optional, default is 2M</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># max_xmlpipe2_field    = 4M</span><br><br><br>    <span class="hljs-comment"># write buffer size, bytes</span><br>    <span class="hljs-comment"># several (currently up to 4) buffers will be allocated</span><br>    <span class="hljs-comment"># write buffers are allocated in addition to mem_limit</span><br>    <span class="hljs-comment"># optional, default is 1M</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># write_buffer      = 1M</span><br>}<br><br><span class="hljs-comment">#############################################################################</span><br><span class="hljs-comment">## searchd settings</span><br><span class="hljs-comment">#############################################################################</span><br><br>searchd<br>{<br>    <span class="hljs-comment"># hostname, port, or hostname:port, or /unix/socket/path to listen on</span><br>    <span class="hljs-comment"># multi-value, multiple listen points are allowed</span><br>    <span class="hljs-comment"># optional, default is 0.0.0.0:9312 (listen on all interfaces, port 9312)</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># listen                = 127.0.0.1</span><br>    <span class="hljs-comment"># listen                = 192.168.0.1:9312</span><br>     listen             = 9312<br>     <span class="hljs-comment">#listen     = 9306:mysql41</span><br><br><br>    <span class="hljs-comment"># log file, searchd run info is logged here</span><br>    <span class="hljs-comment"># optional, default is 'searchd.log'</span><br>    log                 = /usr/local/coreseek/var/log/searchd.log<br><br>    <span class="hljs-comment"># query log file, all search queries are logged here</span><br>    <span class="hljs-comment"># optional, default is empty (do not log queries)</span><br>    query_log           = /usr/local/coreseek/var/log/query.log<br><br>    <span class="hljs-comment"># client read timeout, seconds</span><br>    <span class="hljs-comment"># optional, default is 5</span><br>    read_timeout        = 5<br><br>    <span class="hljs-comment"># request timeout, seconds</span><br>    <span class="hljs-comment"># optional, default is 5 minutes</span><br>    client_timeout      = 300<br><br>    <span class="hljs-comment"># maximum amount of children to fork (concurrent searches to run)</span><br>    <span class="hljs-comment"># optional, default is 0 (unlimited)</span><br>    max_children        = 30<br><br>    <span class="hljs-comment"># PID file, searchd process ID file name</span><br>    <span class="hljs-comment"># mandatory</span><br>    pid_file            = /usr/local/coreseek/var/log/searchd.pid<br><br>    <span class="hljs-comment"># max amount of matches the daemon ever keeps in RAM, per-index</span><br>    <span class="hljs-comment"># WARNING, THERE'S ALSO PER-QUERY LIMIT, SEE SetLimits() API CALL</span><br>    <span class="hljs-comment"># default is 1000 (just like Google)</span><br>    max_matches         = 10000<br><br>    <span class="hljs-comment"># seamless rotate, prevents rotate stalls if precaching huge datasets</span><br>    <span class="hljs-comment"># optional, default is 1</span><br>    seamless_rotate     = 1<br><br>    <span class="hljs-comment"># whether to forcibly preopen all indexes on startup</span><br>    <span class="hljs-comment"># optional, default is 0 (do not preopen)</span><br>    preopen_indexes     = 0<br><br>    <span class="hljs-comment"># whether to unlink .old index copies on succesful rotation.</span><br>    <span class="hljs-comment"># optional, default is 1 (do unlink)</span><br>    unlink_old          = 1<br><br>    <span class="hljs-comment"># attribute updates periodic flush timeout, seconds</span><br>    <span class="hljs-comment"># updates will be automatically dumped to disk this frequently</span><br>    <span class="hljs-comment"># optional, default is 0 (disable periodic flush)</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># attr_flush_period = 900</span><br><br><br>    <span class="hljs-comment"># instance-wide ondisk_dict defaults (per-index value take precedence)</span><br>    <span class="hljs-comment"># optional, default is 0 (precache all dictionaries in RAM)</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># ondisk_dict_default   = 1</span><br><br><br>    <span class="hljs-comment"># MVA updates pool size</span><br>    <span class="hljs-comment"># shared between all instances of searchd, disables attr flushes!</span><br>    <span class="hljs-comment"># optional, default size is 1M</span><br>    mva_updates_pool    = 1M<br><br>    <span class="hljs-comment"># max allowed network packet size</span><br>    <span class="hljs-comment"># limits both query packets from clients, and responses from agents</span><br>    <span class="hljs-comment"># optional, default size is 8M</span><br>    max_packet_size     = 8M<br><br>    <span class="hljs-comment"># crash log path</span><br>    <span class="hljs-comment"># searchd will (try to) log crashed query to 'crash_log_path.PID' file</span><br>    <span class="hljs-comment"># optional, default is empty (do not create crash logs)</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># crash_log_path        = /usr/local/coreseek/coreseek/var/log/crash</span><br><br><br>    <span class="hljs-comment"># max allowed per-query filter count</span><br>    <span class="hljs-comment"># optional, default is 256</span><br>    max_filters         = 256<br><br>    <span class="hljs-comment"># max allowed per-filter values count</span><br>    <span class="hljs-comment"># optional, default is 4096</span><br>    max_filter_values   = 4096<br><br><br>    <span class="hljs-comment"># socket listen queue length</span><br>    <span class="hljs-comment"># optional, default is 5</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># listen_backlog        = 5</span><br><br><br>    <span class="hljs-comment"># per-keyword read buffer size</span><br>    <span class="hljs-comment"># optional, default is 256K</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># read_buffer           = 256K</span><br><br><br>    <span class="hljs-comment"># unhinted read size (currently used when reading hits)</span><br>    <span class="hljs-comment"># optional, default is 32K</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># read_unhinted     = 32K</span><br>}<br><br><span class="hljs-comment"># --eof--</span><br></code></pre></div></body></html>